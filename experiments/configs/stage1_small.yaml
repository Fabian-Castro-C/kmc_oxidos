# Stage 1: Small lattice for basic learning
# Focus: Learn basic event proposals and SwarmEngine dynamics

# Environment configuration
environment:
  lattice_size: [8, 8, 5]
  temperature: 600.0
  deposition_rate: 1.0
  max_steps: 100
  n_swarm: 4
  n_proposals: 32
  reward_weights:
    roughness_weight: -1.0
    coverage_weight: 0.5
    ratio_weight: -0.3
    ess_weight: -0.1

# PPO hyperparameters (from SB3 best practices)
ppo:
  learning_rate: 3.0e-4  # Can use linear schedule: linear_schedule(3e-4)
  n_steps: 2048           # Rollout buffer size (per env)
  batch_size: 64          # Minibatch size for optimization
  n_epochs: 10            # Number of epochs per update
  gamma: 0.99             # Discount factor
  gae_lambda: 0.95        # GAE parameter
  clip_range: 0.2         # PPO clipping parameter
  ent_coef: 0.01          # Entropy coefficient (exploration)
  vf_coef: 0.5            # Value function coefficient
  max_grad_norm: 0.5      # Gradient clipping

# Training configuration
total_timesteps: 100_000  # 100k steps for stage 1
n_envs: 8                 # Number of parallel environments

# ESS monitoring
ess_threshold: 0.3        # Minimum acceptable ESS
ess_patience: 10          # Evaluations before early stopping
